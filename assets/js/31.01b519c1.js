(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{714:function(e,t,r){"use strict";r.r(t);var v=r(15),_=Object(v.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"ğŸ”¥tcpçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥tcpçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"}},[e._v("#")]),e._v(" ğŸ”¥TCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹")]),e._v(" "),r("p",[e._v("ä½œè€…: "),r("a",{attrs:{href:"https://github.com/HerryLo",target:"_blank",rel:"noopener noreferrer"}},[e._v("HerryLo"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("åŸæ–‡æ°¸ä¹…é“¾æ¥ï¼š"),r("a",{attrs:{href:"https://github.com/AttemptWeb/Record/issues/10",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/AttemptWeb/Record/issues/10"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("ä¸Šé¢æœ‰ä¸€ç¯‡ä¸“é—¨ä»‹ç»è¿‡"),r("a",{attrs:{href:"./2019-08-02"}},[e._v("TCPå’ŒUCPåè®®")]),e._v("ï¼Œå…¶ä¸­åªæ˜¯ç²—ç•¥çš„æåˆ°TCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œå››æ¬¡æŒ¥æ‰‹å®Œå…¨æ²¡æœ‰è¯´åˆ°ï¼Œæ‰€ä»¥è¿™æ¬¡ä¸“é—¨æ€»ç»“äº†è¿™ç¯‡æ–‡ç« ï¼Œä¸“é—¨è®²è®²"),r("strong",[e._v("ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹")]),e._v("ã€‚")]),e._v(" "),r("p",[r("strong",[e._v("å¤‡æ³¨ï¼š(ä¸‹æ–‡ä¸­æåˆ°çš„ä¸“ä¸šæœ¯è¯­)")])]),e._v(" "),r("blockquote",[r("p",[e._v("ack â€”â€” ç¡®è®¤å·ç ")])]),e._v(" "),r("blockquote",[r("p",[e._v("seq â€”â€” é¡ºåºå·ç ")])]),e._v(" "),r("blockquote",[r("p",[e._v("ISN â€”â€” åˆå§‹åºåˆ—å·")])]),e._v(" "),r("blockquote",[r("p",[e._v("ACK â€”â€” ç¡®è®¤ï¼Œä½¿å¾—ç¡®è®¤å·æœ‰æ•ˆï¼ˆæ¡æ‰‹ä½¿ç”¨ï¼‰")])]),e._v(" "),r("blockquote",[r("p",[e._v("SYN â€”â€” ç”¨äºåˆå§‹åŒ–ä¸€ä¸ªè¿æ¥çš„åºåˆ—å·ï¼Œå»ºç«‹è”æœº")])]),e._v(" "),r("blockquote",[r("p",[e._v("FIN â€”â€” è¯¥æŠ¥æ–‡çš„å‘é€æ–¹å·²ç»ç»“æŸå‘å¯¹æ–¹å‘é€æ•°æ®")])]),e._v(" "),r("h2",{attrs:{id:"tcpçš„ä¸‰æ¬¡æ¡æ‰‹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#tcpçš„ä¸‰æ¬¡æ¡æ‰‹"}},[e._v("#")]),e._v(" TCPçš„ä¸‰æ¬¡æ¡æ‰‹")]),e._v(" "),r("p",[e._v("ä¸‰æ¬¡æ¡æ‰‹ å®é™…å°±æ˜¯"),r("strong",[e._v("Clientç«¯å’ŒServerç«¯å»ºç«‹ç¨³å®šTCPè¿æ¥çš„å‘é€ä¸‰ä¸ªåŒ…çš„è¿‡ç¨‹")]),e._v("ã€‚")]),e._v(" "),r("p",[r("img",{attrs:{src:"/Img/TCP3_640.webp",alt:"img1"}})]),e._v(" "),r("ul",[r("li",[r("p",[e._v("ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š(SYN=1, ACK=0, seq=x):")]),e._v(" "),r("blockquote",[r("p",[e._v("Clientå‘é€SYNæ ‡å¿—ä½1çš„åŒ…åˆ°Serverï¼Œä»¥åŠåˆå§‹åºå·xï¼ˆä¿å­˜åœ¨åŒ…å¤´çš„åºåˆ—å·seqå­—æ®µï¼Œç®€ç§°ISNï¼‰ï¼Œå’ŒACKæ ‡å¿—ä½ä¸º0ï¼Œå¹¶è¿›å…¥SYN_SENDçŠ¶æ€ï¼Œç­‰å¾…Serverç¡®è®¤ã€‚")])])]),e._v(" "),r("li",[r("p",[e._v("ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š(SYN=1, ACK=1, seq=y, ack=x+1):")]),e._v(" "),r("blockquote",[r("p",[e._v("Serverå‘å›ç¡®è®¤åŒ…(ACK)åº”ç­”ã€‚å³ SYN æ ‡å¿—ä½å’Œ ACK æ ‡å¿—ä½å‡ä¸º1ã€‚Serverç¡®è®¤ISNåºåˆ—å·ï¼Œæ”¾åˆ°seqåŸŸé‡Œï¼ŒåŒæ—¶å°†ç¡®è®¤åºå·(ack)è®¾ç½®ä¸ºClientçš„ISNåŠ 1ï¼Œå³x+1ã€‚ å‘é€å®Œæ¯•åï¼ŒServerè¿›å…¥ SYN_RCVD çŠ¶æ€ã€‚")])])]),e._v(" "),r("li",[r("p",[e._v("ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼š(ACK=1ï¼Œseq=x+1ï¼Œack=y+1)")]),e._v(" "),r("blockquote",[r("p",[e._v("Clientå†æ¬¡å‘é€ç¡®è®¤åŒ…(ACK)ï¼ŒACKæ ‡å¿—ä½ä¸º1ï¼Œå¹¶ä¸”æŠŠServerå‘æ¥ISNçš„åºå·å­—æ®µ+1ï¼Œæ”¾åœ¨ç¡®å®šå­—æ®µä¸­å‘é€ç»™å¯¹æ–¹ã€‚")])])])]),e._v(" "),r("p",[e._v("å‘é€å®Œæ¯•åï¼ŒClientå’ŒServerå»ºç«‹è¿æ¥ï¼ŒTCP æ¡æ‰‹ç»“æŸã€‚")]),e._v(" "),r("h3",{attrs:{id:"ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹"}},[e._v("#")]),e._v(" ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("å‡è®¾ä¸å­˜åœ¨ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œåœ¨Så¯¹Cçš„è¯·æ±‚æŠ¥æ–‡å›åº”åï¼Œå°±ä¼šè®¤ä¸ºè¿æ¥å·²ç»å»ºç«‹ï¼Œè¿›å…¥ç›‘å¬çŠ¶æ€ã€‚ä½†ç”±äºç½‘ç»œåŸå› ï¼ŒCç«¯å¹¶æ²¡æœ‰æ”¶åˆ°Sçš„ç¡®è®¤æŠ¥æ–‡ï¼ŒCè®¤ä¸ºè¿æ¥æœªå»ºç«‹ï¼ŒSå´è®¤ä¸ºè¿æ¥å·²ç»å»ºç«‹ï¼ŒåŒæ—¶å¯¹è¿æ¥ä¿å­˜å¿…è¦çš„èµ„æºã€‚ç”±äºè¿æ¥æœªå»ºç«‹ï¼Œä½†Sè¿›å…¥ç›‘å¬çŠ¶æ€ï¼Œå¯¼è‡´èµ„æºè¢«æµªè´¹ã€‚")])]),e._v(" "),r("li",[r("p",[e._v("å‡è®¾ä¸å­˜åœ¨ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼ŒCç«¯å‘é€çš„ç¬¬ä¸€æ¬¡è¯·æ±‚æŠ¥æ–‡ï¼Œåœ¨ç½‘ç»œèŠ‚ç‚¹æ»ç•™è¿‡é•¿æ—¶é—´ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¿æ¥é‡Šæ”¾ä»¥åçš„æŸä¸ªæ—¶é—´æ‰åˆ°è¾¾Sç«¯ã€‚åœ¨Sç«¯æ”¶åˆ°è¿™ä¸ªè¯·æ±‚æŠ¥æ–‡ä¹‹åï¼Œè¯¯è®¤ä¸ºæ˜¯Cç«¯ä¸€ä¸ªæ–°çš„è¯·æ±‚ã€‚äºæ˜¯å°±å‘Cå‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼ŒåŒæ„å»ºç«‹è¿æ¥ã€‚ä½†ç”±äºç°åœ¨Cç«¯å¹¶æ²¡æœ‰å‘å‡ºå»ºç«‹è¿æ¥çš„è¯·æ±‚ï¼Œå› æ­¤ä¸ä¼šç†ç¬Sç«¯çš„ç¡®è®¤ï¼Œä¹Ÿä¸ä¼šå‘Sç«¯å‘é€æ•°æ®ã€‚ä½†Sç«¯å´ä»¥ä¸ºæ–°çš„è¿æ¥å·²ç»å»ºç«‹ï¼Œå¹¶ä¸€ç›´ç­‰å¾…Cç«¯å‘æ¥æ•°æ®ã€‚è¿™æ ·ï¼Œserverçš„å¾ˆå¤šèµ„æºå°±ç™½ç™½æµªè´¹æ‰äº†ã€‚")])])]),e._v(" "),r("h2",{attrs:{id:"tcpå››æ¬¡æŒ¥æ‰‹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#tcpå››æ¬¡æŒ¥æ‰‹"}},[e._v("#")]),e._v(" TCPå››æ¬¡æŒ¥æ‰‹")]),e._v(" "),r("p",[e._v("å››æ¬¡æŒ¥æ‰‹ å®é™…å°±æ˜¯"),r("strong",[e._v("Clientç«¯å’ŒServerç«¯å…³é—­TCPè¿æ¥çš„å‘é€å››ä¸ªåŒ…çš„è¿‡ç¨‹")]),e._v("ã€‚")]),e._v(" "),r("p",[r("img",{attrs:{src:"/Img/TCP4_640.webp",alt:"img23"}})]),e._v(" "),r("ul",[r("li",[e._v("ç¬¬ä¸€æ¬¡æŒ¥æ‰‹(FIN=1ï¼Œseq=u)")])]),e._v(" "),r("blockquote",[r("p",[e._v("Client æƒ³è¦å…³é—­è¿æ¥ï¼ŒClient ä¼šå‘é€ä¸€ä¸ªFINæ ‡å¿—ä½ç½®ä¸º1ï¼Œå½“å‰åºåˆ—å·ä¸ºuçš„åŒ…ï¼Œè¡¨ç¤ºéœ€è¦å…³é—­è¿æ¥äº†ã€‚Clientè¿›å…¥ FIN_WAIT_1 çŠ¶æ€ã€‚")])]),e._v(" "),r("ul",[r("li",[e._v("ç¬¬äºŒæ¬¡æŒ¥æ‰‹(ACK=1ï¼Œseq=vï¼Œack=u+1)")])]),e._v(" "),r("blockquote",[r("p",[e._v("Serveræ”¶åˆ°Clientçš„FINåŒ…ä¹‹åï¼Œä¼šå‘é€ä¸€ä¸ªç¡®è®¤åºå·ä¸ºæ”¶åˆ°çš„åºåˆ—å·u+1çš„åŒ…ï¼Œè¡¨æ˜è‡ªå·±æ¥å—åˆ°äº†Clientå…³é—­è¿æ¥çš„è¯·æ±‚ï¼Œä½†è¿˜æœªå‡†å¤‡å¥½å…³é—­è¿æ¥ã€‚Serverè¿›å…¥ CLOSE_WAIT çŠ¶æ€ï¼ŒClientè¿›å…¥ FIN_WAIT_2 çŠ¶æ€ã€‚")])]),e._v(" "),r("ul",[r("li",[e._v("ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹(FIN=1ï¼ŒACK=1ï¼Œseq=wï¼Œack=u+1)")])]),e._v(" "),r("blockquote",[r("p",[e._v("å½“"),r("strong",[e._v("Serverå°†å‰©ä½™æ•°æ®å‘é€å®Œ")]),e._v("ä¹‹åï¼Œä¼šå‘é€ä¸€ä¸ªè‡ªå·±çš„FINåŒ…ï¼Œåºåˆ—å·ä¸ºu+1ã€‚Serverè¿›å…¥ LAST_ACK çŠ¶æ€ï¼Œç­‰å¾…æ¥è‡ªClientçš„æœ€åä¸€ä¸ªACKã€‚")])]),e._v(" "),r("ul",[r("li",[e._v("ç¬¬å››æ¬¡æŒ¥æ‰‹(ACK=1ï¼Œseq=u+1ï¼Œack=w+1)")])]),e._v(" "),r("blockquote",[r("p",[e._v("Clientæ¥æ”¶åˆ°æ¥è‡ªServerç«¯çš„å…³é—­è¯·æ±‚ä¹‹åï¼Œå‘é€æœ€åä¸€ä¸ªACKç¡®è®¤åŒ…ï¼Œç¡®è®¤åºå·è®¾ç½®ä¸ºæ”¶åˆ°åºå·åŠ 1ã€‚Clientè¿›å…¥ TIME_WAITçŠ¶æ€ï¼Œç­‰å¾…å¯èƒ½å‡ºç°çš„è¦æ±‚é‡ä¼ çš„ ACK åŒ…ã€‚Serveræ¥æ”¶åˆ°è¿™ä¸ªç¡®è®¤åŒ…ä¹‹åï¼Œå…³é—­è¿æ¥ï¼Œè¿›å…¥CLOSEDçŠ¶æ€ã€‚(Clientä¼šç­‰å¾…2MSLä¹‹åï¼Œæ²¡æœ‰æ”¶åˆ°Serverçš„ACK ï¼Œå°±ç¡®è®¤Serverè¿›å…¥CLOSEDçŠ¶æ€ï¼Œè‡ªå·±ä¹Ÿå…³é—­è¿›å…¥CLOSEDçŠ¶æ€ã€‚)")])]),e._v(" "),r("p",[e._v("å‘é€å®Œæ¯•åï¼ŒClientå’ŒServeræ–­å¼€è¿æ¥ï¼ŒTCP æŒ¥æ‰‹ç»“æŸã€‚")]),e._v(" "),r("p",[e._v("ä»¥ä¸Šå°±æ˜¯è¿™æ¬¡æŒ¥æ‰‹å’Œæ¡æ‰‹çš„å…¨éƒ¨å†…å®¹äº†ï¼Œå¦‚æœæœ‰ç–‘é—®æ¬¢è¿ç•™è¨€å“¦ã€‚")]),e._v(" "),r("p",[e._v("ä¸Šä¸€ç¯‡ï¼š"),r("a",{attrs:{href:"https://github.com/AttemptWeb/Record/issues/6",target:"_blank",rel:"noopener noreferrer"}},[e._v("ä¼ è¾“å±‚çš„TCPå’ŒUDPåè®®"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[e._v("#")]),e._v(" å‚è€ƒèµ„æ–™")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/53374516",target:"_blank",rel:"noopener noreferrer"}},[e._v("çŸ¥ä¹ï¼šâ€œä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹â€ä½ çœŸçš„æ‡‚å—ï¼Ÿ"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.bilibili.com/video/av9876107/?p=70&t=656",target:"_blank",rel:"noopener noreferrer"}},[e._v("bilibili: è®¡ç®—æœºç½‘ç»œTCPä¼ è¾“å±‚è¿æ¥ç®¡ç†"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("ps: é¡ºä¾¿æ¨ä¸€ä¸‹è‡ªå·±çš„ä¸ªäººå…¬ä¼—å·ï¼šYopaiï¼Œæœ‰å…´è¶£çš„å¯ä»¥å…³æ³¨ï¼Œæ¯å‘¨ä¸å®šæœŸæ›´æ–°ï¼Œåˆ†äº«å¯ä»¥å¢åŠ ä¸–ç•Œçš„å¿«ä¹")]),e._v(" "),r("p",[r("img",{attrs:{src:"/webChat1.png",alt:""}})])])}),[],!1,null,null,null);t.default=_.exports}}]);